# 介绍

## 概述

Canyon（法语意为 "快速的"，发音 /vit/，发音同 "veet"）Canyon 是一个 JavaScript 代码覆盖率收集平台。我们解决了开发人员和 QA 工程师在端到端测试过程中收集测试用例代码覆盖率时遇到的困难。它由三个主要部分组成：

- 负责适配各种CI工具、读取环境变量的一系列插件。

- 负责收集和处理覆盖率数据的 API 服务。

- 一组负责显示覆盖率报告的前端和后端服务。

![](/static/documentation/getting-started/introduction/home-screen.png)

## 为什么是Canyon?

Canyon 是一款专注于端到端测试覆盖率收集的工具，解决在高并发、分布式的 UI 自动化任务中，准确统计每个测试用例覆盖率的难题。

它通过在编译阶段分离 hit 和 map 数据，能够高效处理 UI 自动化测试产生的大量覆盖率数据。

此外，Canyon 适配了常见持续集成环境，能够在构建阶段插入探针代码，在 UI 自动化测试阶段收集和上报覆盖率数据。

这使得开发团队能够实时了解当前 UI 自动化测试用例的覆盖率情况，从而更好地评估和提升代码质量。

> 你的测试越是类似于你的软件的使用方式，它们就越能值得你信赖。- [Kent C. Dodds](https://twitter.com/kentcdodds/status/977018512689455106) - Testing Library 的作者

### 功能

- [SourceMap](/documentation/core-concepts/restore-source-code-coverage)：源码覆盖率还原
- [框架](/documentation/installation/getting-started)：提供常见打包工具、前端框架的覆盖率方案
- [自动化框架](/documentation/end-to-end-testing/getting-started)：提供常见自动化框架集成方案
- [CI](/documentation/reference/provider)：适配了常见持续集成环境，侦测CI变量
- [准确高效](/documentation/core-concepts/separate-hit-and-map)：通过分离hit、map，编译时生成初始覆盖率数据，准确轻松。


### 自托管

如果您希望完全掌控您的覆盖率数据和测试数据，您可以在自己的基础设施上[自托管](/documentation/self-host/community-edition/prerequisites) Canyon。

## 生态系统

| 项目                  | 状态                                                         | 描述                                         |
| --------------------- | ------------------------------------------------------------ | -------------------------------------------- |
| [babel-plugin-canyon] | [![babel-plugin-canyon-status]][babel-plugin-canyon-package] | Babel 插件，用于检测流水线环境变量           |
| [canyon-uploader]     | [![canyon-uploader-status]][canyon-uploader-package]         | 扫描本地 `.canyon_output` 数据并上传到服务器 |
| [canyon-extension]    | [![canyon-extension-status]][canyon-extension-package]       | Chrome 插件，用于手动上报覆盖率数据          |

[babel-plugin-canyon]: https://github.com/canyon-project/babel-plugin-canyon
[vite-plugin-canyon]: https://github.com/canyon-project/vite-plugin-canyon
[canyon-uploader]: https://github.com/canyon-project/canyon-uploader
[canyon-extension]: https://github.com/canyon-project/canyon-extension
[babel-plugin-canyon-status]: https://img.shields.io/npm/v/babel-plugin-canyon.svg
[vite-plugin-canyon-status]: https://img.shields.io/npm/v/vite-plugin-canyon.svg
[canyon-uploader-status]: https://img.shields.io/npm/v/canyon-uploader.svg
[canyon-extension-status]: https://img.shields.io/chrome-web-store/v/omnpafdjidgpdmlimbangcjjaaodbeof.svg
[babel-plugin-canyon-package]: https://npmjs.com/package/babel-plugin-canyon
[vite-plugin-canyon-package]: https://npmjs.com/package/babel-plugin-vite
[canyon-uploader-package]: https://npmjs.com/package/canyon-uploader
[canyon-extension-package]: https://chrome.google.com/webstore/detail/canyon/omnpafdjidgpdmlimbangcjjaaodbeof

## 架构

以下图示展示了 Canyon 及其生态系统的一些组件架构：

1. Babel 插件在 CI/CD 流水线中完成代码插桩。
2. 项目发布到测试环境，用户可以选择 UI 自动化或手动测试来触发插桩代码探针。
3. 生成的覆盖率数据上报至 Canyon 服务器。
4. Canyon 服务器消费数据，并结合 GitLab 提供的源代码信息生成覆盖率报告。

![](/static/documentation/getting-started/introduction/architecture.png)
