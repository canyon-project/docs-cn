# CanyonUT

Canyon UT 专门收集单元测试覆盖率数据。

## 安装

### Docker

```bash copy
docker run -d -p 8080:8080 --name canyon-ut zhangtao25/canyon-ut
```

## 使用

各种测试框架的使用方式大同小异，简而言之，只需要在测试框架的配置器中添加`json`即可。

### Vitest

Vitest报告器 [详细配置](https://cn.vitest.dev/guide/coverage.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A6%86%E7%9B%96%E7%8E%87%E7%9A%84%E6%8A%A5%E5%91%8A%E5%99%A8)

```typescript filename="vitest.config.ts" copy {10}
import { defineConfig } from 'vitest/config'

export default defineConfig({
  test: {
    coverage: {
      provider: 'istanbul', // or 'v8'
      reporter: [
        // 原本的报告器
        "json",
        // canyon-reporter
        "canyon-reporter"
      ],
    },
  },
})
```

## 准备好了！！！

此时当运行测试用例时会产生json格式的覆盖率文件，您可以使用`canyon-uploader`上传至Canyon服务端，查看 [canyon-uploader]() 文档了解更多详情。

```bash copy
canyon-uploader --dsn=https://canyonjs.org
```
