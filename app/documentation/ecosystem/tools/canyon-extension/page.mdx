# Canyon Extension

Canyon 报告器由 Istanbul 加载，与其报告器接口相匹配。查看 [built-in reporters' implementation](https://github.com/istanbuljs/istanbuljs/tree/main/packages/istanbul-reports/lib) 了解更多详情。

## 安装

```bash npm2yarn copy
npm install canyon-reporter --save-dev
```

## 使用

各种测试框架的使用方式大同小异，只需在报告器配置中添加 `canyon-reporter` 即可。

### Vitest

Vitest报告器 [详细配置](https://cn.vitest.dev/guide/coverage.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A6%86%E7%9B%96%E7%8E%87%E7%9A%84%E6%8A%A5%E5%91%8A%E5%99%A8)

```typescript filename="vitest.config.ts" copy {10}
import { defineConfig } from "vitest/config";

export default defineConfig({
  test: {
    coverage: {
      provider: "istanbul", // or 'v8'
      reporter: [
        // 原本的报告器
        "json",
        // canyon-reporter
        "canyon-reporter",
      ],
    },
  },
});
```

> [!TIP]
>
> 对于 Vitest ，您还可以在 [Vitest UI](https://cn.vitest.dev/guide/coverage.html#vitest-ui) 中使用 Canyon 报告器，请看 [例子](https://github.com/canyon-project/canyon/tree/main/examples)。

### Jest

Jest报告器 [详细配置](https://jestjs.io/zh-Hans/docs/configuration#coveragereporters-arraystring--string-options)

```javascript filename="jest.config.js" copy {7}
/** @type {import('jest').Config} */
const config = {
  coverageReporters: [
    // 原本的报告器
    "clover",
    "json",
    "lcov",
    // canyon-reporter
    "canyon-reporter",
  ],
};

module.exports = config;
```

### 更多

更多测试框架的配置请参考我们提供的 [例子](https://github.com/canyon-project/canyon/tree/main/examples) (canyon-reporter开头的例子)
